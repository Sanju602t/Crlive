<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Streaming</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #121212; color: #e0e0e0; display: flex; flex-direction: column; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .container { text-align: center; background-color: #1e1e1e; padding: 40px 20px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5); width: 90%; max-width: 600px; }
        h1 { font-size: 2.5em; color: #4CAF50; margin-bottom: 20px; }
        .buttons-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; margin-top: 30px; }
        .server-button { 
            background-color: #333; 
            border: 2px solid #4CAF50; 
            color: #e0e0e0; 
            padding: 12px 25px; 
            font-size: 1.1em; 
            cursor: pointer; 
            border-radius: 8px; 
            transition: all 0.3s ease;
            text-align: center;
            -webkit-user-select: none; 
            -moz-user-select: none; 
            -ms-user-select: none; 
            user-select: none; 
            touch-action: manipulation;
        }
        .server-button:hover { background-color: #4CAF50; color: #121212; transform: translateY(-3px); box-shadow: 0 6px 10px rgba(0, 0, 0, 0.3); }
        #message { color: #f44336; margin-top: 20px; font-size: 1em; }
    </style>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
</head>
<body>

<div class="container">
    <h1>Live Servers</h1>
    <div class="buttons-container"></div>
    <p id="message"></p>
</div>

<script>
    const firebaseConfig = {
      apiKey: "AIzaSyADkJHCkcN_GYcgO5isyo3lUH6_77xirJ0",
      authDomain: "shadow-movies.firebaseapp.com",
      databaseURL: "https://shadow-movies-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "shadow-movies",
      storageBucket: "shadow-movies.firebasestorage.app",
      messagingSenderId: "167005811786",
      appId: "1:167005811786:web:8c9e761b17227bbac9e2b3",
      measurementId: "G-B1FMSECJCV"
    };

    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();
    const linksRef = database.ref('streaming_links');

    linksRef.on('value', (snapshot) => {
        const links = snapshot.val();
        const buttonsContainer = document.querySelector('.buttons-container');
        buttonsContainer.innerHTML = '';
        const message = document.getElementById('message');

        if (!links) {
            message.innerText = 'Sorry, koi links abhi available nahi hain.';
            return;
        }

        message.innerText = '';
        Object.keys(links).forEach(key => {
            const linkData = links[key];
            const button = document.createElement('button');
            button.className = 'server-button';
            button.innerText = linkData.name;
            button.onclick = () => {
                const playerUrl = `player.html?url=${encodeURIComponent(linkData.url)}`;
                window.open(playerUrl, '_blank');
            };
            buttonsContainer.appendChild(button);
        });
    }, (error) => {
        console.error("Firebase se data fetch karne mein error aayi:", error);
        document.getElementById('message').innerText = 'Firebase connection mein problem hai.';
    });
</script>

</body>
</html>
